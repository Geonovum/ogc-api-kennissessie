extends layout.pug

block content

  .container
    .row
      .col-sm-12
        br
        section#process(itemscope='' itemtype='https://schema.org/WebAPI')
          h2(itemprop='name') #{title}
          div(itemprop='description') #{description}
          .row
            .col-sm-12.col-md-12
              table.table.table-striped.table-bordered
                thead
                  tr
                    th Id
                    th Title
                    th Data Type
                    th Description
                tbody
                  each input, key in inputs
                    tr(itemprop='parameter' itemscope='')
                      td(itemprop='id' data-label='ID') #{key}
                      td(itemprop='name' data-label='Title') #{input.title}
                      td(itemprop='name' data-label='Data Type') #{input.schema.type}
                      td(itemprop='description' data-label='Description') #{input.description}
            .col-sm-12.col-md-12
              table.table.table-striped.table-bordered
                thead
                  tr
                    th Id
                    th Title
                    th Description
                tbody
                  each output, key in outputs
                    tr(itemprop='parameter' itemscope='')
                      td(itemprop='id' data-label='ID') #{key}
                      td(itemprop='name' data-label='Title') #{output.title}
                      td(itemprop='description' data-label='Description')
                        | #{output.description}
              h2 Execution modes
              ul
                each jobControlOption in jobControlOptions
                  li=jobControlOption
              h2 Jobs
              - var linkJobs = links.find(i => i.rel == 'http://www.opengis.net/def/rel/ogc/1.0/job-list').href
              a(href=linkJobs) Browse jobs
              - var linkAbout = links.find(i => i.rel == 'about').href
              - var linkSelf = links.find(i => i.rel == 'self').href
              - var linkAlternate = links.find(i => i.rel == 'alternate').href
              - var linkJobListHtml = links.find(i => i.rel == 'http://www.opengis.net/def/rel/ogc/1.0/job-list' && i.type == 'text/html').href
              - var linkJobListJson = links.find(i => i.rel == 'http://www.opengis.net/def/rel/ogc/1.0/job-list' && i.type == 'application/json').href
              - var linkExecute = links.find(i => i.rel == 'http://www.opengis.net/def/rel/ogc/1.0/execute').href
              h2 Links
              ul
                li
                  a(href=linkAbout)
                    | information (text/html)
                li
                  a(href=linkSelf)
                    | Process description as HTML (text/html)
                li
                  a(href=linkAlternate)
                    | Process description as JSON (application/json)
                li
                  a(href=linkJobListHtml)
                    | Jobs list as HTML (text/html)
                li
                  a(href=linkJobListJson)
                    | Jobs list as JSON (application/json)
                li
                  a(href=linkExecute)
                    | Execution for this process as JSON (application/json)
